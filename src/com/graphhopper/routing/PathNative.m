//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: graphhopper/core/src/main/java/com/graphhopper/routing/PathNative.java
//

#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "com/graphhopper/routing/Path.h"
#include "com/graphhopper/routing/PathNative.h"
#include "com/graphhopper/routing/weighting/Weighting.h"
#include "com/graphhopper/storage/Graph.h"
#include "com/graphhopper/util/EdgeIterator.h"

@interface PathNative () {
 @public
  IOSIntArray *parentNodes_;
  IOSIntArray *parentEdges_;
}
@end

J2OBJC_FIELD_SETTER(PathNative, parentNodes_, IOSIntArray *)
J2OBJC_FIELD_SETTER(PathNative, parentEdges_, IOSIntArray *)

@implementation PathNative

- (instancetype)initWithGraph:(id<Graph>)g
withComGraphhopperRoutingWeightingWeighting:(id<ComGraphhopperRoutingWeightingWeighting>)weighting
                 withIntArray:(IOSIntArray *)parentNodes
                 withIntArray:(IOSIntArray *)parentEdges {
  if (self = [super initWithGraph:g withComGraphhopperRoutingWeightingWeighting:weighting]) {
    PathNative_set_parentNodes_(self, parentNodes);
    PathNative_set_parentEdges_(self, parentEdges);
  }
  return self;
}

- (Path *)extract {
  if (endNode_ < 0) return self;
  jint prevEdge = EdgeIterator_NO_EDGE;
  while (YES) {
    jint edgeId = IOSIntArray_Get(nil_chk(parentEdges_), endNode_);
    if (!EdgeIterator_Edge_isValidWithInt_(edgeId)) break;
    [self processEdgeWithInt:edgeId withInt:endNode_ withInt:prevEdge];
    prevEdge = edgeId;
    endNode_ = IOSIntArray_Get(nil_chk(parentNodes_), endNode_);
  }
  [self reverseOrder];
  return [self setFoundWithBoolean:YES];
}

- (void)dealloc {
  RELEASE_(parentNodes_);
  RELEASE_(parentEdges_);
  [super dealloc];
}

- (void)copyAllFieldsTo:(PathNative *)other {
  [super copyAllFieldsTo:other];
  PathNative_set_parentNodes_(other, parentNodes_);
  PathNative_set_parentEdges_(other, parentEdges_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGraph:withComGraphhopperRoutingWeightingWeighting:withIntArray:withIntArray:", "PathNative", NULL, 0x1, NULL },
    { "extract", NULL, "Lcom.graphhopper.routing.Path;", 0x1, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "parentNodes_", NULL, 0x12, "[I", NULL,  },
    { "parentEdges_", NULL, 0x12, "[I", NULL,  },
  };
  static const J2ObjcClassInfo _PathNative = { 1, "PathNative", "com.graphhopper.routing", NULL, 0x1, 2, methods, 2, fields, 0, NULL};
  return &_PathNative;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(PathNative)
